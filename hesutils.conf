
# HESIOD UTILITIES CONFIGURATION FILE
# ===================================
#
# Refer to the Hesutils documentation for further information.


# Hesiod namespace configuration
# ------------------------------------------------------------------------------

# Left-hand side and right-hand side domain components used in Hesiod lookups.
#
# - LHS can be empty, RHS must be defined.
# - Neither can contain spaces or non-printable characters (they must be
#   lexically valid domain components).
# - For compatibility reasons both must include a leading dot.
# - /etc/hesiod.conf on the client machines must contain the same LHS and RHS.
#
# Note that the top-level component (the rightmost part of the RHS, after the
# last dot) must NOT be ".local", as this is the domain component used for mDNS
# queries (Bonjour, Avahi, etc).
#
# As a configuration example, this is the configuration needed to query the
# original Hesiod name server from the Athena project at MIT:
#   LSH=.ns
#   RHS=.athena.mit.edu
#
# Default values:       LHS=
#                       RHS=.hesiod
#
# The default values work well for a local system without a domain.
#
LHS=
RHS=.hesiod



# User and group configuration
# ------------------------------------------------------------------------------

# Minimum and maximum UID values for Hesiod user accounts?
#
# Default values:       UIDMIN=5000
#                       UIDMAX=5999
#
UIDMIN=5000
UIDMAX=5999

# Minimum and maximum GID values for Hesiod groups?
#
# Default values:       GIDMIN=${UIDMIN}
#                       GIDMAX=${UIDMAX}
#
GIDMIN=${UIDMIN}
GIDMAX=${UIDMAX}



# Home directory configuration
# ------------------------------------------------------------------------------

# NOTE: The entire topic of home directories and FILSYS records is more
#       complicated than it seems at first. Please read the Hesutils
#       documentation to understand fully what everything does.


# Change the home directory path?
#
# Home directories can have a different mount point on client nodes. In that
# case, the home directory path sent out in answer to a Hesiod passwd request,
# needs to be modified to match the home directory path on the remote machine.
#
# The mechanism used for that is a "sed" command. This option contains the
# expression passed as parameter to sed. If the parameter is empty or commented
# out, no modification will be made.
#
# NOTE: The path modification also applies to the FILSYS records (see below).
# 
# Examples:
# Local home root path on the server:       /home
# Mounted home root path on the clients:    /mnt/nfs/home
# HOMEDIRSED                                's:^/:/mnt/nfs/:g'
#
# Default value:        HOMEDIRSED=  [empty]
#
HOMEDIRSED=

# Generate FILSYS records for automounting the user home directories on clients?
#
# The Linux automounter supports Hesiod as a provider of filesystem maps. On the
# server, this takes the form of FILSYS TXT records. The clients must be
# configured to use 
#
# Default value:        FILSYS=0
#
FILSYS=0

# Name of the server providing access to the home directories?
#
# This can be an IP address or a hostname. The hostname must resolve from the
# client nodes.
#
# Default value:        FSSERVER=$(hostname -f)  [the FQDN of the local machine]
#
FSSERVER=$(hostname -f)

# Filesystem type or protocol to access the home directories?
#
# Default value:        FSTYPE=NFS
#
FSTYPE=NFS

# Use a custom automount map file?
#
# Simple, homogeneous configurations can be created via the use of FSSERVER and
# FSTYPE. For more complicated configurations, an external automount map file
# must be provided.
#
# Each non-empty, non-comment (#) line in that file follow the syntax:
#   <user name> <FS type> <server path> <server> <r|w> <client mount point>
#
# All fields are mandatory.
#
# Example:
#   NFS /home/user1 nfsserv w /nfs/home/user1
#
# If FILSYS=1 and both HOMEDIRSED and FSMAPFILE are defined, the lookup order
# for each user is:
#  1) if an entry exists in the map file, use it;
#  2) of not, apply the sed transformation to the user home directory.
# In other words, entries in the map file override the default configuration on
# a per-user basis.
#
# Default value:        FSMAPFILE=  [none]
#
FSMAPFILE=



# DNS server configuration
# ------------------------------------------------------------------------------

# Generate the Hesiod TXT entries for various DNS servers?
#
# Default values:       GENDNSMASQ=1
#                       GENUNBOUND=0
#                       GENBIND=0
#
GENDNSMASQ=1
GENUNBOUND=0
GENBIND=0

# Full path of the generated Hesiod DB files for various DNS servers?
#
# NOTE: That option is ignored if the selected output is stdout.
#
# The variable ${HESDOMAIN} contains the Hesiod domain built from LHS (if
# defined) and RHS, without any leading dot.
#
# Default values:       DNSMASQPATH=/etc/dnsmasq.d/${HESDOMAIN}.conf
#                       UNBOUNDPATH=/etc/unbound/unbound.conf.d/${HESDOMAIN}.conf
#                       BINDPATH=/etc/bind/${HESDOMAIN}.db
#
DNSMASQPATH=
UNBOUNDPATH=
BINDPATH=

# Restart or reload the respective DNS servers?
#
# Only servers for which a new configuration file was written, and that are
# running when the Hesutils scripts are executed, will be restarted.
#
# NOTE: That option is ignored if the selected output is stdout.
#
# Default value:        RESTARTDNS=1
#
RESTARTDNS=1



# Miscellaneous configuration options
# ------------------------------------------------------------------------------

# Prevent Hesiod lookups without a local TXT record (a.k.a. unknown users and
# groups) from being forwarded to the upstream DNS servers?
#
# Default value:        BLOCKUPSTREAM=1
#
BLOCKUPSTREAM=1

# The default domain name used for Hesiod queries when the client libhesiod is
# not configured, is still the original one from MIT (ns.athena.mit.edu). Any
# Hesiod lookup from unconfigured clients will thus be forwarded to the MIT DNS
# servers, if not blocked.
#
# Prevent Hesiod lookups from unconfigured clients from being forwarded to the
# hardcoded default DNS server?
#
# Default value:        BLOCKATHENA=1
#
BLOCKATHENA=1

